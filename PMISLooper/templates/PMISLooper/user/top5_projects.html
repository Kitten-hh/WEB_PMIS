{% extends 'PMISLooper/index.html' %}
{%load static %}
{% load i18n %}
{%load customer_filter%}
{%load md5url%}
{%block form_css%}
{{block.super}}
<link rel="stylesheet" href="{% md5url 'PMISLooper/assets/stylesheets/user/top5_projects.css' %}" data-skin="default">
<link rel="stylesheet" href="{% md5url 'PMISLooper/assets/stylesheets/user/top5_projects_dark.css' %}" data-skin="dark">
<link rel="stylesheet" type="text/css" href="{% static 'BaseApp/vendor/jquery_contextmenu/jquery.contextMenu.min.css'%}" />
{%endblock%}
{% block content %}
{{block.super}}                  
<div class="none">
{%include "BaseApp/looper_base/components/SWGantt.html"%}    
</div>
<header class="page-cover flex-row justify-content-between activites_header">
    <div class="d-none d-sm-flex align-items-center text-center col-auto p-3 border-right"
        style="border-right-style: dashed !important;">
        <a href="javascript:;" class="user-avatar user-avatar-lg custShadow"><img
                src="{% static 'PMISLooper/assets/images/timg.jpg' %}" alt=""></a>
        <div class="pl-2">
            <h2 class="h4 mb-0 username"></h2>
            <div class="mt-1">
                <i class="fa fa-star text-yellow"></i> <i class="fa fa-star text-yellow"></i> <i
                    class="fa fa-star text-yellow"></i> <i class="fa fa-star text-yellow"></i> <i
                    class="far fa-star text-yellow"></i>
            </div>
        </div>
    </div>
    <div class="metric-row w-100 m-0 flex-nowrap customer_metric_row scrollbar">
        <a href="javascript:;" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value">5</p>
            <h2 class="metric-label"> {% trans "Projects" %} </h2>
        </a>
        <a href="javascript:;" id="session_link" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value">35</p>
            <h2 class="metric-label"> {% trans "Sessions" %} </h2>
        </a>
        <a href="javascript:;" id="act_tasks_link" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value">14</p>
            <h2 class="metric-label"><span class="ml-2">{% trans "Tasks" %}</span></h2>
        </a>
        <a href="javascript:;" id="new_technicals" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value">14</p>
            <h2 class="metric-label"> {% trans "New Technicals" %} </h2>
        </a>
        <a href="javascript:;" id="new_questions" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value">3</p>
            <h2 class="metric-label"> {% trans "New Questions" %} </h2>
        </a>
        <a href="javascript:;" id="project_goal" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value"><span class="text-primary pgoal_total">31</span> / <span
                    class="pgoal_completed">53</span></p>
            <h2 class="metric-label"> {% trans "Project Goal" %} </h2>
        </a>
        <a href="javascript:;" id="week_goal" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value"><span class="text-primary pgoal_total">6</span> / <span
                    class="pgoal_completed">10</span></p>
            <h2 class="metric-label"> {% trans "Week Goal" %} </h2>
        </a>
        <a href="javascript:;" id="must_finish" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value"><span class="text-primary pgoal_total">23</span> / <span
                    class="pgoal_completed">30</span></p>
            <h2 class="metric-label"> {% trans "Must Finish" %} </h2>
        </a>
        <a href="javascript:;" id="must_have" class="metric align-items-center customer_metric">
            <p class="metric-value h5 value"><span class="text-primary pgoal_total">10</span> / <span
                    class="pgoal_completed">20</span></p>
            <h2 class="metric-label">{% trans "Must Have" %} </h2>
        </a>
    </div>
</header>
<nav class="page-navs">
    <div class="nav-scroller">
        <div class="nav nav-center nav-tabs">
            <a class="nav-link" href="/looper">{% trans "Overview"%}</a>
            <a class="nav-link" href="/looper/user/activites">{% trans "Activities"%}</a>
            <a class="nav-link" href="/looper/user/teams">{% trans "Teams"%}</a>
            <a class="nav-link" href="/devplat/project/overview" target="project">{% trans "Projects"%}</a>
            <a class="nav-link active" href="/looper/user/top5_projects" target="top_project">{% trans "Milestone"%}</a>
            <a class="nav-link" href="/looper/user/sessions">{% trans "Sessions"%}</a>
            <a class="nav-link" href="/looper">{% trans "Settings"%}</a>
        </div>
    </div>
</nav>
<div class="page-inner top5_mustHave">
    <!-- <div class="row"> -->
        <div class="userlist d-flex align-items-center mb-2 pl-0"></div>
        <!-- <button class="hamburger" name="refresh" type="button" data-original-title="Refresh"><i class="fas fa-redo-alt"></i></button>
    </div> -->
    <div class="row" id="projectList">
    </div>
</div>
<div id="summary_template" class="d-none">
    <div class="summary_wrap card-body">
        <h4 class="card-title sum_title py-2 mb-0">
        <i class="fas fa-thumbtack mr-2"></i>{% trans "Summary"%} </h4>
        <div class="d-flex justify-content-between align-items-center mb-2 pl-2 pt-2">
            <div class="text-left left-date-title" data-toggle="tooltip" data-placement="top"
                data-original-title="Actual completion time">
                <span class="sr-only">Actual completion time</span>
                <i class="far fa-calendar-check text-dark mr-2"></i>[[planedate]]</div>
            <div class="text-dark"><strong class="text-primary">[[Completed_Qty]]</strong> / <span>[[All_Qty]]</span></div>
        </div>
        <div class="d-flex flex-column pl-2">
            <div class="row justify-content-start mb-2">
                <div class="col-auto">
                    <span class="oi oi-media-record text-complete mark_icon"></span>
                    Completed ([[Completed_Qty]])
                </div>
                <div class="col-auto">
                    On time ([[Complete_on_time_Qty]])
                </div>
                <div class="col-auto">
                    Overdue ([[Overdue_Completed_Qty]])
                </div>
            </div>
            <div class="row justify-content-start mb-2">
                <div class="col-auto">
                    <span class="oi oi-media-record text-au mark_icon"></span>
                    Uncompleted ([[Uncompleted_Qty]])
                </div>
                <div class="col-auto">
                    Unoverdue ([[Unoverdue_Qty]])
                </div>                
                <div class="col-auto">
                    Overdue ([[Overdue_Qty]])
                </div>
                <div class="col-auto">
                    Active ([[Active_Qty]])
                </div>
            </div>            
            <div class="progress progress-sm mb-2">
                <div class="progress-bar bg-complete progress-bar-striped progress-bar-animated" role="progressbar" style="width: [[Completed]]%" aria-valuenow="[[Completed]]"
                    aria-valuemin="0" aria-valuemax="100"></div>
                <div class="progress-bar bg-au progress-bar-striped progress-bar-animated" role="progressbar" style="width: [[Uncompleted]]%" aria-valuenow="[[Uncompleted]]"
                    aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
    </div>    
</div>
<div id="title_template" class="d-none">
    <div class="d-flex justify-content-between align-items-center">
        <h4 class="card-title mb-0">[[title]]</h4>
        <div class="d-flex">
        <button type="button" class="btn btn-sm btn-icon btn-light btn_project_calendar" recordid="[[recordid]]"><i class="fas fa-calendar-alt"></i></button>    
        <button type="button" class="btn btn-sm btn-icon btn-light btn_project_gantt" recordid="[[recordid]]">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M512 416l0-64c0-35.3-28.7-64-64-64L64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64zM64 160l0-64 144 0 16 0 0 64L64 160zm224 0l0-64 80 0c8.8 0 16 7.2 16 16l0 16-38.1 0c-21.4 0-32.1 25.9-17 41L399 239c9.4 9.4 24.6 9.4 33.9 0L503 169c15.1-15.1 4.4-41-17-41L448 128l0-16c0-44.2-35.8-80-80-80L224 32l-16 0L64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l160 0c35.3 0 64-28.7 64-64z"/></svg>
        </button>        
        <button type="button" class="btn btn-sm btn-icon btn-light btn_project_diagram" recordid="[[recordid]]"><i class="fas fa-project-diagram"></i></button>
        <button type="button" class="btn btn-sm btn-icon btn-light btn_mindmap_diagram" recordid="[[recordid]]"><i class="fas fa-sitemap"></i></button>
        <div class="dropdown goal_content">
            <button type="button" class="btn btn-sm btn-icon btn-light" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false"><i class="fas fa-book fa-book-open"></i></button>
            <div class="dropdown-menu dropdown-menu-rich dropdown-menu-right px-2 pt-2" style="">
                <div class="dropdown-arrow"></div>
                <div class="form-group SWTextarea" style="">
                    <label class="col-form-label caption" for="tf6" style="display: none;"></label>
                    <textarea readonly class="form-control control" id="tf6" rows="10" name="goaldesc">[[goaldesc]]</textarea>
                </div>                
            </div>
        </div>        
        <div class="dropdown filter_session">
            <button type="button" class="btn btn-sm btn-icon btn-light" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false"><i class="fas fa-filter"></i></button>
            <div class="dropdown-menu dropdown-menu-rich dropdown-menu-right">
                <div class="dropdown-arrow"></div>
                <div class="session_treegrid scrollbar px-1"></div>
                <div class="session_treegrid_operation d-flex justify-content-between px-1 py-2">
                <button class="btn btn-sm btn-subtle-light text-primary clear">{% trans "Clear" %}</button>
                <button class="btn btn-sm btn-subtle-danger apply">{% trans "OK" %}</button></div>
            </div>
        </div>    
        <div class="dropdown filter_goal ">
            <button type="button" class="btn btn-sm btn-icon btn-light" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false"><i class="fas fa-stream"></i></button>
            <div class="dropdown-menu dropdown-menu-right task_filter">
                <div class="dropdown-arrow"></div>
                <h6 class="dropdown-header">{% trans "Task Category" %}</h6>
                <a href="#" class="dropdown-item pl-4" filter_type="category" name="MF">Must Finish</a> 
                <a href="#" class="dropdown-item pl-4" filter_type="category" name="MH">Must Have</a> 
                <a href="#" class="dropdown-item pl-4" filter_type="category" name="all">All</a> 
                <h6 class="dropdown-header">{% trans "Users" %}</h6>
            </div>
        </div>  
        <div class="dropdown other_toolMenu">
            <button type="button" class="btn btn-sm btn-icon btn-light" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false"><i class="fas fa-ellipsis-v"></i></button>
            <div class="dropdown-menu dropdown-menu-right">
                <div class="dropdown-arrow"></div>
                <a href="#" class="dropdown-item addMFTask" recordid="[[recordid]]"><i class="fas fa-plus mr-2"></i>{% trans "Add Must Finish Task" %}</a>
            </div>
        </div>    
        </div>
    </div>
</div>
<div class="modal fade" id="update_MH_task" tabindex="-1" role="dialog" aria-labelledby="form" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl modal-dialog-scrollable " role="document">
        <div class="modal-content" id="update_MH_task_div">
            <div class="modal-header">
                <h5 class="modal-title">
                    {% trans "Set Must Have Task" %}
                </h5>
                <button type="button" class="close text-dark" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card card-reflow">
                    <div class="card-header p-0">
                        <div class="filter row m-0">
                            <div class="filter_t d-flex align-items-center mt-xl-0 col-12 col-sm-12 col-lg-5 col-xl-4 f_planDate">
                                <label class="col-form-label caption col-auto pl-0" for="planBDates">{% trans "PlanBDate" %}</label>
                                <div class="input-group input-group-alt m-0">
                                    <input id="planBDates" name = 'planBDates' type="text" class="form-control flatpickr-input col" data-toggle="flatpickr" data-disable-mobile="true" />
                                    <div class="input-group-append" style="margin-right: -1px;">
                                        <span class="input-group-text custom-text font-weight-bold">{% trans "To" %}</span>
                                    </div>
                                    <input id="planBDatee" name = 'planBDatee' type="text" class="form-control flatpickr-input col" data-toggle="flatpickr" data-disable-mobile="true" />
                                </div>
                            </div>
                            <div class="toolbar col-auto mt-xl-0 order-8">
                                <button type="button" class="btn btn-primary btn-clear"><i class="fa fa-broom d-xxxl-none"></i><span class="d-none d-xxxl-inline-block">{% trans "Clear" %}</span></button>
                                <button type="button" class="btn btn-primary btn-search"><i class="oi oi-magnifying-glass d-xxxl-none"></i><span class="d-none d-xxxl-inline-block">{% trans "Search" %}</span></button>
                            </div>
                        </div>        
                    </div>
                    <div class="card-body p-0">
                        <div class="technicDetail">
                            <div class="row">
                                <div class="col-12">
                                    <div id="session_tasks_table"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="el-example">
                    <button class="btn btn-primary save" type="submit" id="update_MH_task_submit"><i class="far fa-save mr-1"></i>{% trans "Confirm" %}</button>
                    <button type="button"  class="btn btn-secondary"  data-dismiss="modal" aria-label="Close">{% trans "Cancel" %}</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="project_calendar" tabindex="-1" role="dialog" aria-labelledby="form" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl modal-dialog-scrollable " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    {% trans "Calendar" %}
                </h5>
                <button type="button" class="close text-dark" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="project_calendar_container"></div>                
            </div>
            <div class="modal-footer">
                <div class="el-example">
                    <button type="button"  class="btn btn-secondary"  data-dismiss="modal" aria-label="Close">{% trans "Close" %}</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="project_gantt" tabindex="-1" role="dialog" aria-labelledby="form" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl modal-dialog-scrollable " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    {% trans "Gantt" %}
                </h5>
                <button type="button" class="close text-dark" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body"   style="overflow-y: hidden;">
                <div id="project_gantt_container" ></div>                
            </div>
            <div class="modal-footer">
                <div class="el-example">
                    <button type="button"  class="btn btn-secondary"  data-dismiss="modal" aria-label="Close">{% trans "Close" %}</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{%block form_js%}
{{ block.super }}
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/perfect-scrollbar/perfect-scrollbar.min.js' %}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/stacked-menu/js/stacked-menu.min.js' %}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/perfect-scrollbar/perfect-scrollbar.min.js' %}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/moment/min/moment.min.js' %}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/snapsvg/snap.svg-min.js' %}"></script>
<script src="{% md5url 'BaseApp/assets/javascript/looper_base/components/SWGantt.js' %}" type="text/javascript"></script>    
<script src="{% static 'BaseApp/vendor/jquery_contextmenu/jquery.ui.position.min.js'%}"></script>
<script src="{% static 'BaseApp/vendor/jquery_contextmenu/jquery.contextMenu.min.js'%}"></script>
<script src="{% md5url 'PMISLooper/assets/javascript/user/top5_projects.js' %}" type="text/javascript"></script>
{%endblock%}