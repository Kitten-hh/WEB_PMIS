{% extends 'BaseApp/looper_base/base_form2/base.html' %}
{%load static %}
{% load i18n %}
{% load md5url %}
{%block form_css%}
<link href="{% static 'BaseApp/vendor/jquery-splitter/css/jquery.splitter.css'%}" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static 'PMISLooper/assets/stylesheets/mindmap/mindmap.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'PMISLooper/assets/stylesheets/quick-add-task.css' %}" />
{%endblock%}
{%block content %}
{% get_current_language as LANGUAGE_CODE %}
<input id="curr_language_code" value="{{LANGUAGE_CODE}}" type="hidden"/>
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="myModal">點擊顯示</button>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" style="min-width: min-content; "
        role="document">
        <div class="modal-content" style="width: 1500px;">
            {%include "PMISLooper/mindmap/mindmap_modal.html"%}
        </div>
    </div>
</div>

{%endblock%}
{%block form_js%}
<script src="{% md5url 'PMISLooper/assets/javascript/quick-add-task.js' %}" type="text/javascript"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/perfect-scrollbar/perfect-scrollbar.min.js'%}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/parsleyjs/parsley.min.js'%}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/vanilla-text-mask/vanillaTextMask.js'%}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/text-mask-addons/textMaskAddons.js'%}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/bs-stepper/js/bs-stepper.min.js'%}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/javascript/pages/steps-demo.js'%}"></script>
<script src="{% static 'BaseApp/vendor/Looper/assets/vendor/jstree/jstree.min.js'%}"></script>
<script src="{% md5url 'BaseApp/vendor/jquery-splitter/js/jquery.splitter.js'%}"></script>
<script src="{% static 'BaseApp/vendor/jquery/ajaxhook.min.js' %}" type="text/javascript"></script>
<script src="{% md5url 'PMIS/js/syspublic.js'%}"></script>
<script src="{% md5url 'PMISLooper/assets/javascript/user/index_login.js' %}" type="text/javascript"></script>    
<script src="{% md5url 'PMISLooper/assets/javascript/mindmap/mindmap.js'%}"></script>

<script>
    $(function () {
        var jsondelete_array = new Array();
        $("#techtree").bind("ready.jstree", function () {
            for (key in jsonarray) {
                key_val = jsonarray[key];
                if (key_val.parent == -1 && key_val.id != 1) {
                    jsondelete_array.push(key_val)
                }
            }
            $("#techtree").jstree(true).delete_node(jsondelete_array);
        })

        $("#MindmapEnterbtn").on("click", function () {
            $('#myModal').modal('hide');
            var json_data = mindmap.selector_node();
            console.log(json_data);

        })

        $(".btn-lg").on("click", function () {
            $('#myModal').modal('show');
            $("#rightPane").css({             
                "width":"298.5px"
            })
        })
    })
</script>
{%endblock%}
